<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="mobile-web-app-capable" content="yes" />

    <meta name="description" content="">
    <meta name="author" content="Morgan Rehnberg">

    <link rel="stylesheet" href="css/bootstrap.min.css">

    <style>
    body {
      background-color: white;
      color: black;
    }
    h1 {
      font-size: 65px;
    }
    li {
      font-size: 30px;
    }
    p {
      font-size: 30px;
    }
    .hidden {
      display: none;
    }
    .btn {
      font-size: 50px!important;
    }
    #attractorOverlay {
      position: fixed;
      display: flex;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0,0,0,0.9);
      z-index: 5;
      cursor: pointer;
      justify-content: center;
      align-items: center;
    }
    #attractorVideo {
      position: fixed;
      display: flex;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
    }
    #gameBoard {
      border-style: solid;
      border-width: 10px;
      border-color: black;
    }
    </style>

    <title></title>

  </head>

  <body>
    <div class="container-fluid">

      <div id="attractorOverlay" onclick='hideAttractor();'>
        <video id="attractorVideo" autoplay loop src='attractor.mp4'></video>
      </div>

      <div class='row mt-4'>
        <div class='col-7'>
          <canvas id="gameBoard" width="1000px" height="1000px">
          </canvas>
        </div>
        <div class='col-5 pl-0 pr-5'>
          <h1>Can You Find Your Way?</h1>
          <p>
            Before smartphones and GPS, planning ahead was much more important. Most travelers relied on maps like the one you see above you to help them know where to go.
          </p>
          <p>
            For Black travelers, planning was even more important. They needed fuel and food just as often as other travelers, but those necessities were available to them in many fewer locations.
          </p>
          <p>
            <b>Try your hand at navigation using the game on the left.</b> To plan your route, touch the city icons in the order you want to go. But pay attention to your resources! If you run out of food or fuel, or you don't find enough places to rest, your trip will come to an abrupt halt.
          </p>
          <H2><b>Can you make these trips?</b></H2>
          <ul>
            <li>Fort Worth to Columbus with a stop in Brownwood</li>
            <li>Fort Worth to San Antonio without passing through College Station</li>
            <li>Fort Worth to Houston with only two stops</li>
          </ul>
          <div class='row'>
            <div class='col-6'>
              <button class='btn btn-primary btn w-100' onclick='startTrip()'>Start Trip</button>
            </div>
            <div class='col-6'>
              <button class='btn btn-warning btn w-100' onclick='reset()'>Reset</button>
            </div>
          </div>
        </div>
      </div>




      <!-- Loading images for the canvas -->
      <img id='icon-food' class='hidden' src="icons/food.svg"></img>
      <img id='icon-fuel' class='hidden' src="icons/fuel.svg"></img>
      <img id='icon-sleep' class='hidden' src="icons/sleep.svg"></img>
      <img id='game-background' class='hidden' src="images/map_background.jpeg"></img>
      <img id='car-up' class='hidden' src="icons/car_up.png"></img>
      <img id='car-down' class='hidden' src="icons/car_down.png"></img>
      <img id='car-left' class='hidden' src="icons/car_left.png"></img>
      <img id='car-right' class='hidden' src="icons/car_right.png"></img>
    </div>

  <script type="text/javascript" src="js/jquery-3.6.0.min.js"></script>
  <script type="text/javascript" src="js/popper.min.js"></script>
  <script type="text/javascript" src="js/bootstrap.min.js"></script>
  <script type="text/javascript" src="js/showdown.min.js"></script>
  <script type="text/javascript" src="config.js"></script>
  <script type="text/javascript" src="game.js"></script>
  <script>

    var siteList = [
      new City("Fort Worth", 10, 3, 'sleep', 50, selected=true),
      new City("Dallas", 12, 3, 'sleep', 50),
      new City("Austin", 7, 12, 'sleep', '50'),
      new City("San Antonio", 4, 16, 'sleep', 50),
      new City("Houston", 16, 15, 'sleep', 50),
      new Site("Waco", 9, 8, "fuel", 20),
      new Site("College Station", 12, 12, "fuel", 20),
      new Site("Tyler", 15, 5, "food", 20),
      new Site("Palestine", 13, 9, "food", 20),
      new Site("Brownwood", 4, 9, "food", 20),
      new Site("Lufkin", 17, 9, "fuel", 20),
      new Site("Abilene", 3, 4, "fuel", 20),
      new Site("Columbus", 11, 16, "food", 20),
    ]

    var roadList = [
      new Road([[10,3], [12,3]]), // Fort Worth - Dallas
      new Road([[10,3], [3,3], [3,4]]), // Fort Worth - Abilene
      new Road([[12,3], [12,4], [15, 4], [15,5]]), // Dallas - Tyler
      new Road([[10,3], [10,6], [9, 6], [9,8]]), // Fort Worth - Waco
      new Road([[9,8], [7,8], [7,10], [9,10], [9,12], [7,12]]), // Waco - Austin
      new Road([[9,8], [9,9], [4,9]]), // Waco - Brownwood
      new Road([[3,4], [3,5], [4,5], [4,9]]), // Abilene - Brownwood
      new Road([[10,3], [10,7], [11, 7], [11, 9], [13,9]]), // Fort Worth - Palestine
      new Road([[13,9], [14,9], [14,8], [17,8], [17,9]]), // Palestine - Lufkin
      new Road([[9,8], [10,8], [10,9], [13,9]]), // Waco - Palestine
      new Road([[15,5], [17,5], [17,9]]), // Tyler - Lufkin
      new Road([[13,9], [14,9], [14,10], [15,10], [15,11], [16,11], [16,15]]), // Palestine - Houston
      new Road([[7,12], [2,12], [2,13], [4,13], [4,16]]), // Austin - San Antonio
      new Road([[7,12], [12,12]]), // Austin - College Station
      new Road([[12,12], [17,12], [17, 16], [16,16], [16,15]]), // College Station - Houston
      new Road([[12,12], [12,14], [11,14], [11,16]]), // College Station - Columbus
      new Road([[4,16], [8,16], [8,15], [11,15], [11,16]]), // San Antonio - Columbus
      new Road([[11,16], [13,16], [13,15], [16,15]]), // Columbus - Houston
      new Road([[4,9], [4,10], [5,10], [5,11], [6,11], [7,11], [7,12]]), // Brownwood - Austin
      new Road([[13,9], [13,10], [12,10], [12,12]]), //Palestine - College Station
    ]

    var route = ["Fort Worth"];
    var roadRoute = [];
    const gridSpacing = 50;
    var trip = new Trip();
    draw();
    $(document).bind("touchstart", resetActivityTimer);
    
    // These will be replaced by values from the helper upon loading
    var id = "UNKNOWN";
    var type = "INFOSTATION";
    var serverAddress = ""; // The address of the main control server
    var allowedActionsDict = {"refresh": "true"};
    var contentPath = "";
    var current_exhibit = "";

    var inactivityTimer = 0;
    var errorDict = {};
    var currentlyActive = false;
    askForDefaults();
    sendPing();
    setInterval(sendPing, 5000);
  </script>

  </body>

</html>
